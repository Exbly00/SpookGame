<script setup>
import { useFetchJson } from "@/composables/useFetchJson";
import { ref } from "vue";

const { data, error, loading } = useFetchJson("stories");

const authUserRef = ref(authUser);
const csrfToken = ref(
    document.head.querySelector('meta[name="csrf-token"]').content
);
</script>

<template>
    <div class="page">
        <div class="login-menu">
            <slot v-if="authUserRef === null">
                <a href="/login">Se connecter</a>
                <a href="/register">CrÃ©er un compte</a>
            </slot>
            <form v-else action="/logout" method="POST">
                <input type="hidden" name="_token" :value="csrfToken" />
                <button type="submit">Se dÃ©connecter</button>
            </form>
        </div>

        <h1 class="title">SpookGame</h1>

        <h2 class="subtitle">Bienvenue dans les Profondeurs de l'Horreur</h2>

        <p class="paragraph">
            PrÃªt(e) Ã  vivre une expÃ©rience interactive oÃ¹ chaque dÃ©cision peut
            sceller ton destin ? ðŸ‘»
        </p>

        <p class="paragraph">
            Ici, tu trouveras plusieurs histoires terrifiantes, chacune plus
            sombre que la prÃ©cÃ©dente. Ã€ chaque Ã©tape, quatre choix s'offriront Ã 
            toiâ€¦ mais attention : toutes les routes ne mÃ¨nent pas Ã  une fin
            heureuse. RÃ©flÃ©chis vite, choisis bien. ðŸª¦
        </p>

        <p class="paragraph">
            Un compte Ã  rebours t'accompagnera tout au long de ton aventure pour
            mesurer ton sang-froid et ta rapiditÃ©. Combien de temps te
            faudra-t-il pour sortir vivant(e) ? Si tant est que ce soit
            possibleâ€¦ ðŸŽƒ
        </p>

        <p class="paragraph">Choisis ton histoireâ€¦</p>

        <p class="paragraph">Et que le cauchemar commence. ðŸ’€</p>

        <div class="stories">
            <a href="#story-1" v-for="story in data" class="card">
                <div>{{ story.title }}</div>

                <img src="/storage/images/story_1_chapter_1.jpg" />

                <p>
                    {{ story.description }}
                </p>
            </a>
        </div>
    </div>
</template>

<style scoped>
.page {
    display: flex;
    flex-flow: column nowrap;
    align-items: center;
    background-image: url(/images/home.jpeg);
    background-position: center top;
    background-size: cover;
    min-height: 100vh;
    padding: 20px;
}

.login-menu {
    position: fixed;
    right: 20px;
    display: flex;
    gap: 12px;
    color: #fff;
}

.title {
    font-family: "Metal Mania";
    color: #fff;
    font-size: 80px;
}

.subtitle {
    font-weight: bold;
    color: #fff;
    font-size: 22px;
    margin-bottom: 20px;
}

.paragraph {
    text-align: center;
    color: #fff;
    width: 100%;
    max-width: 800px;
    margin: 8px 0;
}

.add-button {
    background-color: #fff;
    padding: 12px 24px;
    border-radius: 12px;
    text-decoration: none;
    color: inherit;
    transition: transform 0.15s ease-in-out;
}

.add-button:hover {
    transform: scale(1.1);
}

.stories {
    display: flex;
    flex-flow: row wrap;
    justify-content: center;
    gap: 20px;
    margin-top: 20px;
}

.card {
    background-color: #fff;
    padding: 20px;
    border-radius: 12px;
    max-width: 400px;
}

.card div {
    text-align: center;
    font-family: "Metal Mania";
    font-size: 24px;
}

.card img {
    width: 100%;
    border-radius: 12px;
    margin: 12px 0;
}
</style>
